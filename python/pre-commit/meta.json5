{
  rules: [
    {
      files: [".pre-commit-config.yaml"],
      JMESPathsMatch: [
        // All Python projects must use pre-commit meta hooks
        ["length(repos[?repo=='meta'])", 1],
        //   'meta' repo must not contain a 'rev' key
        ["contains(keys(repos[?repo=='meta'] | [0]), 'rev')", false],

        //   must contain the 'check-hooks-apply' hook
        [
          "contains(repos[?repo=='meta'] | [0].hooks[*].id, 'check-hooks-apply')",
          true,
        ],
        //   with the same name as their id
        [
          "repos[?repo=='meta'] | [0].hooks[?id=='check-hooks-apply'] | [0].name",
          "check-hooks-apply",
        ],

        //   must contain the 'check-useless-excludes' hook
        [
          "contains(repos[?repo=='meta'] | [0].hooks[*].id, 'check-useless-excludes')",
          true,
        ],
        //   with the same name as their id
        [
          "repos[?repo=='meta'] | [0].hooks[?id=='check-useless-excludes'] | [0].name",
          "check-useless-excludes",
        ],
      ],
    },
  ],
}

/*
# All Python projects must install meta hooks
[[".pre-commit-config.yaml".repos]]
repo = "meta"

[[".pre-commit-config.yaml".repos.hooks]]
id = "check-hooks-apply"
name = "check-hooks-apply"

[[".pre-commit-config.yaml".repos.hooks]]
id = "check-useless-excludes"
name = "check-useless-excludes"
*/
